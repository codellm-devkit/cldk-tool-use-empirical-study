{"model_name_or_path": "anthropic_filemap__GCP--claude-3-7-sonnet__t-0.00__p-1.00__c-2.00___swe_bench_verified_test", "instance_id": "sphinx-doc__sphinx-9658", "model_patch": "diff --git a/setup.py b/setup.py\nindex 2b4504101..d865b8b37 100644\n--- a/setup.py\n+++ b/setup.py\n@@ -15,22 +15,22 @@ if sys.version_info < (3, 6):\n     sys.exit(1)\n \n install_requires = [\n-    'sphinxcontrib-applehelp',\n-    'sphinxcontrib-devhelp',\n+    'sphinxcontrib-applehelp<=1.0.7',\n+    'sphinxcontrib-devhelp<=1.0.5',\n     'sphinxcontrib-jsmath',\n-    'sphinxcontrib-htmlhelp>=2.0.0',\n-    'sphinxcontrib-serializinghtml>=1.1.5',\n-    'sphinxcontrib-qthelp',\n-    'Jinja2>=2.3',\n+    'sphinxcontrib-htmlhelp>=2.0.0,<=2.0.4',\n+    'sphinxcontrib-serializinghtml>=1.1.5,<=1.1.9',\n+    'sphinxcontrib-qthelp<=1.0.6',\n+    'Jinja2<3.0',\n     'Pygments>=2.0',\n     'docutils>=0.14,<0.18',\n     'snowballstemmer>=1.1',\n     'babel>=1.3',\n-    'alabaster>=0.7,<0.8',\n+    'alabaster>=0.7,<0.7.12',\n     'imagesize',\n     'requests>=2.5.0',\n     'setuptools',\n-    'packaging',\n+    'packaging', 'markupsafe<=2.0.1',\n ]\n \n extras_require = {\ndiff --git a/sphinx/ext/autodoc/__init__.py b/sphinx/ext/autodoc/__init__.py\nindex a255c0691..fe69d6c7a 100644\n--- a/sphinx/ext/autodoc/__init__.py\n+++ b/sphinx/ext/autodoc/__init__.py\n@@ -1664,7 +1664,9 @@ class ClassDocumenter(DocstringSignatureMixin, ModuleLevelDocumenter):  # type:\n             self.env.events.emit('autodoc-process-bases',\n                                  self.fullname, self.object, self.options, bases)\n \n+            # Process base classes\n             base_classes = [restify(cls) for cls in bases]\n+            \n             sourcename = self.get_sourcename()\n             self.add_line('', sourcename)\n             self.add_line('   ' + _('Bases: %s') % ', '.join(base_classes), sourcename)\ndiff --git a/sphinx/util/typing.py b/sphinx/util/typing.py\nindex 87707d48f..90f5a33dd 100644\n--- a/sphinx/util/typing.py\n+++ b/sphinx/util/typing.py\n@@ -107,6 +107,7 @@ def is_system_TypeVar(typ: Any) -> bool:\n def restify(cls: Optional[Type]) -> str:\n     \"\"\"Convert python class to a reST reference.\"\"\"\n     from sphinx.util import inspect  # lazy loading\n+    from sphinx.ext.autodoc.mock import ismock  # Import ismock function\n \n     try:\n         if cls is None or cls is NoneType:\n@@ -130,6 +131,10 @@ def restify(cls: Optional[Type]) -> str:\n                 return 'Optional[%s]' % args\n             else:\n                 return ' | '.join(restify(a) for a in cls.__args__)\n+        # Special handling for mocked classes with __display_name__\n+        elif hasattr(cls, '__display_name__'):\n+            display_name = cls.__display_name__\n+            return ':py:class:`%s`' % display_name\n         elif cls.__module__ in ('__builtin__', 'builtins'):\n             if hasattr(cls, '__args__'):\n                 return ':py:class:`%s`\\\\ [%s]' % (\ndiff --git a/tox.ini b/tox.ini\nindex b6a67fd85..483f2df92 100644\n--- a/tox.ini\n+++ b/tox.ini\n@@ -28,7 +28,7 @@ setenv =\n     PYTHONWARNINGS = all,ignore::ImportWarning:importlib._bootstrap_external,ignore::DeprecationWarning:site,ignore::DeprecationWarning:distutils,ignore::DeprecationWarning:pip._vendor.packaging.version\n     PYTEST_ADDOPTS = {env:PYTEST_ADDOPTS:} --color yes\n commands=\n-    python -X dev -m pytest --durations 25 {posargs}\n+    python -X dev -m pytest -rA --durations 25 {posargs}\n \n [testenv:flake8]\n basepython = python3\n"}