{"model_name_or_path": "anthropic_filemap__GCP--claude-3-7-sonnet__t-0.00__p-1.00__c-2.00___swe_bench_verified_test", "instance_id": "matplotlib__matplotlib-23476", "model_patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\nindex c55864243a..cc0e86d8c0 100644\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -3041,10 +3041,19 @@ class Figure(FigureBase):\n                 f\"This figure was saved with matplotlib version {version} and \"\n                 f\"is unlikely to function correctly.\")\n \n+        # Save the original DPI value before updating the state\n+        original_dpi = state.get('_dpi', None)\n+\n         self.__dict__ = state\n \n         # re-initialise some of the unstored state information\n         FigureCanvasBase(self)  # Set self.canvas.\n+        \n+        # Restore the original DPI value to prevent doubling on M1 Macs\n+        if original_dpi is not None and hasattr(self, '_dpi'):\n+            self._dpi = original_dpi\n+            if hasattr(self, 'dpi_scale_trans'):\n+                self.dpi_scale_trans.clear().scale(original_dpi)\n \n         if restore_to_pylab:\n             # lazy import to avoid circularity\n"}