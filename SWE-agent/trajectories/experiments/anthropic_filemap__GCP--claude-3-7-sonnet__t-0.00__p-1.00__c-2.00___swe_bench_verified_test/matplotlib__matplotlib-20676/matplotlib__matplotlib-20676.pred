{"model_name_or_path": "anthropic_filemap__GCP--claude-3-7-sonnet__t-0.00__p-1.00__c-2.00___swe_bench_verified_test", "instance_id": "matplotlib__matplotlib-20676", "model_patch": "diff --git a/lib/matplotlib/widgets.py b/lib/matplotlib/widgets.py\nindex a199e45d40..f6116e5b9e 100644\n--- a/lib/matplotlib/widgets.py\n+++ b/lib/matplotlib/widgets.py\n@@ -2156,7 +2156,13 @@ class SpanSelector(_SelectorWidget):\n             self.artists.append(self._rect)\n \n     def _setup_edge_handle(self, props):\n-        self._edge_handles = ToolLineHandles(self.ax, self.extents,\n+        # Get current axis limits to initialize the handles\n+        if self.direction == 'horizontal':\n+            positions = self.ax.get_xlim()\n+        else:\n+            positions = self.ax.get_ylim()\n+            \n+        self._edge_handles = ToolLineHandles(self.ax, positions,\n                                              direction=self.direction,\n                                              line_props=props,\n                                              useblit=self.useblit)\n"}