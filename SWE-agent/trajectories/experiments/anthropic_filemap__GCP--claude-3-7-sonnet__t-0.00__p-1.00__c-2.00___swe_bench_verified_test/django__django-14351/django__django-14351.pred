{"model_name_or_path": "anthropic_filemap__GCP--claude-3-7-sonnet__t-0.00__p-1.00__c-2.00___swe_bench_verified_test", "instance_id": "django__django-14351", "model_patch": "diff --git a/django/db/models/lookups.py b/django/db/models/lookups.py\nindex 5089737034..7001bf4d9a 100644\n--- a/django/db/models/lookups.py\n+++ b/django/db/models/lookups.py\n@@ -401,9 +401,10 @@ class In(FieldGetDbPrepValueIterableMixin, BuiltinLookup):\n             placeholder = '(' + ', '.join(sqls) + ')'\n             return (placeholder, sqls_params)\n         else:\n-            if not getattr(self.rhs, 'has_select_fields', True):\n-                self.rhs.clear_select_clause()\n-                self.rhs.add_fields(['pk'])\n+            # Always ensure we're only selecting the primary key when using __in with a queryset\n+            # This fixes issues with Q objects using OR operations\n+            self.rhs.clear_select_clause()\n+            self.rhs.add_fields(['pk'])\n             return super().process_rhs(compiler, connection)\n \n     def get_rhs_op(self, connection, rhs):\n"}