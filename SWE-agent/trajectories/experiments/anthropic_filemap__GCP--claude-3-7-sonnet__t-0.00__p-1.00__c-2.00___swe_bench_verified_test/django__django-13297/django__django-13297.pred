{"model_name_or_path": "anthropic_filemap__GCP--claude-3-7-sonnet__t-0.00__p-1.00__c-2.00___swe_bench_verified_test", "instance_id": "django__django-13297", "model_patch": "diff --git a/django/shortcuts.py b/django/shortcuts.py\nindex eda6f8813c..9d70efacc0 100644\n--- a/django/shortcuts.py\n+++ b/django/shortcuts.py\n@@ -72,6 +72,12 @@ def get_object_or_404(klass, *args, **kwargs):\n             \"First argument to get_object_or_404() must be a Model, Manager, \"\n             \"or QuerySet, not '%s'.\" % klass__name\n         )\n+    \n+    # Convert any SimpleLazyObject values in kwargs to strings to avoid database errors\n+    for key, value in kwargs.items():\n+        if isinstance(value, Promise) and not isinstance(value, str):\n+            kwargs[key] = str(value)\n+    \n     try:\n         return queryset.get(*args, **kwargs)\n     except queryset.model.DoesNotExist:\n@@ -93,6 +99,12 @@ def get_list_or_404(klass, *args, **kwargs):\n             \"First argument to get_list_or_404() must be a Model, Manager, or \"\n             \"QuerySet, not '%s'.\" % klass__name\n         )\n+    \n+    # Convert any SimpleLazyObject values in kwargs to strings to avoid database errors\n+    for key, value in kwargs.items():\n+        if isinstance(value, Promise) and not isinstance(value, str):\n+            kwargs[key] = str(value)\n+    \n     obj_list = list(queryset.filter(*args, **kwargs))\n     if not obj_list:\n         raise Http404('No %s matches the given query.' % queryset.model._meta.object_name)\ndiff --git a/django/views/generic/base.py b/django/views/generic/base.py\nindex ea5baca08d..dbd6e6554a 100644\n--- a/django/views/generic/base.py\n+++ b/django/views/generic/base.py\n@@ -169,7 +169,6 @@ def _wrap_url_kwargs_with_deprecation_warning(url_kwargs):\n     context_kwargs = {}\n     for key, value in url_kwargs.items():\n         # Bind into function closure.\n-        @SimpleLazyObject\n         def access_value(key=key, value=value):\n             warnings.warn(\n                 'TemplateView passing URL kwargs to the context is '\n@@ -177,8 +176,14 @@ def _wrap_url_kwargs_with_deprecation_warning(url_kwargs):\n                 'view.kwargs instead.' % key,\n                 RemovedInDjango40Warning, stacklevel=2,\n             )\n-            return value\n-        context_kwargs[key] = access_value\n+            # Convert to string to ensure it works with database operations\n+            if isinstance(value, str):\n+                return value\n+            return str(value)\n+        \n+        # Create a lazy object that will convert to string when accessed\n+        context_kwargs[key] = SimpleLazyObject(access_value)\n+    \n     return context_kwargs\n \n \n"}