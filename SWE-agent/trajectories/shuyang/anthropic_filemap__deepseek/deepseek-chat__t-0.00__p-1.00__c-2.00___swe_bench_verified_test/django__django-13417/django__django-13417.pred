{"model_name_or_path": "deepseek-chat__t-0.00__p-1.00__c-2.00___swe_bench_verified_test", "instance_id": "django__django-13417", "model_patch": "diff --git a/django/db/models/query.py b/django/db/models/query.py\nindex 85cd8311a7..4e037e4be5 100644\n--- a/django/db/models/query.py\n+++ b/django/db/models/query.py\n@@ -1225,6 +1225,9 @@ class QuerySet:\n         if self.query.extra_order_by or self.query.order_by:\n             return True\n         elif self.query.default_ordering and self.query.get_meta().ordering:\n+            # Check if GROUP BY is present, which removes default ordering\n+            if self.query.group_by:\n+                return False\n             return True\n         else:\n             return False\ndiff --git a/scripts/reproduce_ordered_issue.py b/scripts/reproduce_ordered_issue.py\nnew file mode 100644\nindex 0000000000..d76353ab88\n--- /dev/null\n+++ b/scripts/reproduce_ordered_issue.py\n@@ -0,0 +1,42 @@\n+from django.db import models\n+from django.db.models.sql.query import Query\n+\n+# Mock the QuerySet and Query classes to reproduce the issue\n+class MockQuery(Query):\n+    def __init__(self, model):\n+        super().__init__(model)\n+        self.default_ordering = True\n+\n+    def get_compiler(self, *args, **kwargs):\n+        class MockCompiler:\n+            def as_sql(self):\n+                return \"SELECT ...\", ()\n+        return MockCompiler()\n+\n+class MockQuerySet:\n+    def __init__(self, model):\n+        self.model = model\n+        self.query = MockQuery(model)\n+        self._result_cache = None\n+\n+    @property\n+    def ordered(self):\n+        return self.query.default_ordering\n+\n+    def all(self):\n+        return self\n+\n+    def annotate(self, *args, **kwargs):\n+        self.query.default_ordering = False  # Simulate GROUP BY removing ordering\n+        return self\n+\n+# Test the issue\n+qs = MockQuerySet(None)\n+print(\"QuerySet without annotate:\")\n+print(f\"Ordered: {qs.ordered}\")\n+print(f\"Default ordering: {qs.query.default_ordering}\")\n+\n+qs2 = MockQuerySet(None).annotate(\"pk\")\n+print(\"\\nQuerySet with annotate:\")\n+print(f\"Ordered: {qs2.ordered}\")\n+print(f\"Default ordering: {qs2.query.default_ordering}\")\n\\ No newline at end of file\n"}