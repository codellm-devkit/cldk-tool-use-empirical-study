{"model_name_or_path": "deepseek-chat__t-0.00__p-1.00__c-2.00___swe_bench_verified_test", "instance_id": "matplotlib__matplotlib-24177", "model_patch": "diff --git a/lib/matplotlib/axes/_axes.py b/lib/matplotlib/axes/_axes.py\nindex 2412f815cd..0dd6b80075 100644\n--- a/lib/matplotlib/axes/_axes.py\n+++ b/lib/matplotlib/axes/_axes.py\n@@ -6876,6 +6876,12 @@ such objects\n             # items lower in the stack are plotted on top of\n             # items higher in the stack\n             for x, y, c in reversed(list(zip(xvals, yvals, color))):\n+                if density and not stacked:\n+                    # Scale the top y-values (every second element) by bin widths for density normalization\n+                    # Exclude the last bin edge to match the shape of np.diff(bins)\n+                    y[1:2*len(bins)-1:2] = y[1:2*len(bins)-1:2] / np.diff(bins)\n+                    # Scale the reversed part of the y array (excluding the last bin edge)\n+                    y[2*len(bins)-1::2] = y[1:2*len(bins)-1:2][::-1] / np.diff(bins)\n                 patches.append(self.fill(\n                     x[:split], y[:split],\n                     closed=True if fill else None,\n"}