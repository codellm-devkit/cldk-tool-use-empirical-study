{"model_name_or_path": "deepseek-chat__t-0.00__p-1.00__c-2.00___swe_bench_verified_test", "instance_id": "django__django-16938", "model_patch": "diff --git a/django/core/serializers/base.py b/django/core/serializers/base.py\nindex 20dffac05f..03a95429d7 100644\n--- a/django/core/serializers/base.py\n+++ b/django/core/serializers/base.py\n@@ -195,9 +195,13 @@ class Serializer:\n         \"\"\"\n         Called to handle a ManyToManyField.\n         \"\"\"\n-        raise NotImplementedError(\n-            \"subclasses of Serializer must provide a handle_m2m_field() method\"\n-        )\n+        if self.selected_fields is not None and field.attname not in self.selected_fields:\n+            return\n+        manager = getattr(obj, field.attname)\n+        if hasattr(manager, \"get_queryset\"):\n+            # Use the default manager to avoid conflicts with custom managers\n+            manager = field.remote_field.model._default_manager\n+        self._current[field.name] = [m2m_value(related) for related in manager.all()]\n \n     def getvalue(self):\n         \"\"\"\n"}