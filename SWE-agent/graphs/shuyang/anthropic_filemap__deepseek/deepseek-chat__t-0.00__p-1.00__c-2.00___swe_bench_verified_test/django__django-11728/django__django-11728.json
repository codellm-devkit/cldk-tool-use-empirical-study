{
  "directed": true,
  "multigraph": true,
  "graph": {
    "resolution_status": "unresolved",
    "instance_name": "django__django-11728",
    "difficulty": "15 min - 1 hour"
  },
  "nodes": [
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.21796016301959753,
        0.2162761241197586
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed"
      },
      "phase": "localization",
      "step_indices": [
        0,
        8
      ],
      "id": "0:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.20106740482151508
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/urls"
      },
      "phase": "localization",
      "step_indices": [
        1
      ],
      "id": "1:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.1953796069137752
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/urls/utils.py"
      },
      "phase": "localization",
      "step_indices": [
        2
      ],
      "id": "2:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.20557959796860814
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/utils"
      },
      "phase": "localization",
      "step_indices": [
        3
      ],
      "id": "3:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.19441957911476493
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/utils/regex_helper.py"
      },
      "phase": "localization",
      "step_indices": [
        4
      ],
      "id": "4:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.21389581495895982
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/core"
      },
      "phase": "localization",
      "step_indices": [
        5
      ],
      "id": "5:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.21690947888419032
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/http"
      },
      "phase": "localization",
      "step_indices": [
        6
      ],
      "id": "6:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.18831419083289802
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/contrib"
      },
      "phase": "localization",
      "step_indices": [
        7
      ],
      "id": "7:str_replace_editor\nview"
    },
    {
      "label": "grep",
      "execution_time": [
        0.33778574503958225,
        0.32452622102573514
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": [
        "/testbed"
      ],
      "phase": "general",
      "step_indices": [
        9,
        10
      ],
      "id": "8:grep"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.18569877790287137
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/contrib/admindocs/utils.py"
      },
      "phase": "localization",
      "step_indices": [
        11
      ],
      "id": "9:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nstr_replace",
      "execution_time": [
        0.2000395900104195
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/contrib/admindocs/utils.py",
        "old_str": "def replace_named_groups(pattern):\n    r\"\"\"\n    Find named groups in `pattern` and replace them with the group name. E.g.,\n    1. ^(?P<a>\\w+)/b/(\\w+)$ ==> ^<a>/b/(\\w+)$\n    2. ^(?P<a>\\w+)/b/(?P<c>\\w+)/$ ==> ^<a>/b/<c>/$\n    \"\"\"\n    named_group_indices = [\n        (m.start(0), m.end(0), m.group(1))\n        for m in named_group_matcher.finditer(pattern)\n    ]\n    # Tuples of (named capture group pattern, group name).\n    group_pattern_and_name = []\n    # Loop over the groups and their start and end indices.\n    for start, end, group_name in named_group_indices:\n        # Handle nested parentheses, e.g. '^(?P<a>(x|y))/b'.\n        unmatched_open_brackets, prev_char = 1, None\n        for idx, val in enumerate(pattern[end:]):\n            # If brackets are balanced, the end of the string for the current\n            # named capture group pattern has been reached.\n            if unmatched_open_brackets == 0:\n                group_pattern_and_name.append((pattern[start:end + idx], group_name))\n                break\n\n            # Check for unescaped `(` and `)`. They mark the start and end of a\n            # nested group.\n            if val == '(' and prev_char != '\\\\':\n                unmatched_open_brackets += 1\n            elif val == ')' and prev_char != '\\\\':\n                unmatched_open_brackets -= 1\n            prev_char = val\n\n    # Replace the string for named capture groups with their group names.\n    for group_pattern, group_name in group_pattern_and_name:\n        pattern = pattern.replace(group_pattern, group_name)\n    return pattern",
        "new_str": "def replace_named_groups(pattern):\n    r\"\"\"\n    Find named groups in `pattern` and replace them with the group name. E.g.,\n    1. ^(?P<a>\\w+)/b/(\\w+)$ ==> ^<a>/b/(\\w+)$\n    2. ^(?P<a>\\w+)/b/(?P<c>\\w+)/$ ==> ^<a>/b/<c>/$\n    \"\"\"\n    named_group_indices = [\n        (m.start(0), m.end(0), m.group(1))\n        for m in named_group_matcher.finditer(pattern)\n    ]\n    # Tuples of (named capture group pattern, group name).\n    group_pattern_and_name = []\n    # Loop over the groups and their start and end indices.\n    for start, end, group_name in named_group_indices:\n        # Handle nested parentheses, e.g. '^(?P<a>(x|y))/b'.\n        unmatched_open_brackets, prev_char = 1, None\n        for idx, val in enumerate(pattern[end:]):\n            # If brackets are balanced, the end of the string for the current\n            # named capture group pattern has been reached.\n            if unmatched_open_brackets == 0:\n                group_pattern_and_name.append((pattern[start:end + idx], group_name))\n                break\n\n            # Check for unescaped `(` and `)`. They mark the start and end of a\n            # nested group.\n            if val == '(' and prev_char != '\\\\':\n                unmatched_open_brackets += 1\n            elif val == ')' and prev_char != '\\\\':\n                unmatched_open_brackets -= 1\n            prev_char = val\n        else:\n            # Handle the case where the group ends at the end of the string.\n            if unmatched_open_brackets > 0:\n                group_pattern_and_name.append((pattern[start:], group_name))\n\n    # Replace the string for named capture groups with their group names.\n    for group_pattern, group_name in group_pattern_and_name:\n        pattern = pattern.replace(group_pattern, group_name)\n    return pattern",
        "edit_status": "success"
      },
      "phase": "patch",
      "step_indices": [
        12
      ],
      "id": "10:str_replace_editor\nstr_replace"
    },
    {
      "label": "echo",
      "execution_time": [
        0.23717527405824512
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": [
        ">",
        "/testbed/test_replace_named_groups.py"
      ],
      "phase": "general",
      "step_indices": [
        13
      ],
      "id": "11:echo"
    },
    {
      "label": "python",
      "execution_time": [
        0.23717527405824512,
        0.37842727289535105
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": [
        "/testbed/test_replace_named_groups.py"
      ],
      "phase": "verification",
      "step_indices": [
        13,
        15
      ],
      "id": "12:python"
    },
    {
      "label": "str_replace_editor\nstr_replace",
      "execution_time": [
        0.22740769083611667
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/django/contrib/admindocs/utils.py",
        "old_str": "def replace_named_groups(pattern):\n    r\"\"\"\n    Find named groups in `pattern` and replace them with the group name. E.g.,\n    1. ^(?P<a>\\w+)/b/(\\w+)$ ==> ^<a>/b/(\\w+)$\n    2. ^(?P<a>\\w+)/b/(?P<c>\\w+)/$ ==> ^<a>/b/<c>/$\n    \"\"\"\n    named_group_indices = [\n        (m.start(0), m.end(0), m.group(1))\n        for m in named_group_matcher.finditer(pattern)\n    ]\n    # Tuples of (named capture group pattern, group name).\n    group_pattern_and_name = []\n    # Loop over the groups and their start and end indices.\n    for start, end, group_name in named_group_indices:\n        # Handle nested parentheses, e.g. '^(?P<a>(x|y))/b'.\n        unmatched_open_brackets, prev_char = 1, None\n        for idx, val in enumerate(pattern[end:]):\n            # If brackets are balanced, the end of the string for the current\n            # named capture group pattern has been reached.\n            if unmatched_open_brackets == 0:\n                group_pattern_and_name.append((pattern[start:end + idx], group_name))\n                break\n\n            # Check for unescaped `(` and `)`. They mark the start and end of a\n            # nested group.\n            if val == '(' and prev_char != '\\\\':\n                unmatched_open_brackets += 1\n            elif val == ')' and prev_char != '\\\\':\n                unmatched_open_brackets -= 1\n            prev_char = val\n        else:\n            # Handle the case where the group ends at the end of the string.\n            if unmatched_open_brackets > 0:\n                group_pattern_and_name.append((pattern[start:], group_name))\n\n    # Replace the string for named capture groups with their group names.\n    for group_pattern, group_name in group_pattern_and_name:\n        pattern = pattern.replace(group_pattern, group_name)\n    return pattern",
        "new_str": "def replace_named_groups(pattern):\n    r\"\"\"\n    Find named groups in `pattern` and replace them with the group name. E.g.,\n    1. ^(?P<a>\\w+)/b/(\\w+)$ ==> ^<a>/b/(\\w+)$\n    2. ^(?P<a>\\w+)/b/(?P<c>\\w+)/$ ==> ^<a>/b/<c>/$\n    \"\"\"\n    named_group_indices = [\n        (m.start(0), m.end(0), m.group(1))\n        for m in named_group_matcher.finditer(pattern)\n    ]\n    # Tuples of (named capture group pattern, group name).\n    group_pattern_and_name = []\n    # Loop over the groups and their start and end indices.\n    for start, end, group_name in named_group_indices:\n        # Handle nested parentheses, e.g. '^(?P<a>(x|y))/b'.\n        unmatched_open_brackets, prev_char = 1, None\n        for idx, val in enumerate(pattern[end:]):\n            # If brackets are balanced, the end of the string for the current\n            # named capture group pattern has been reached.\n            if unmatched_open_brackets == 0:\n                group_pattern_and_name.append((pattern[start:end + idx], group_name))\n                break\n\n            # Check for unescaped `(` and `)`. They mark the start and end of a\n            # nested group.\n            if val == '(' and prev_char != '\\\\':\n                unmatched_open_brackets += 1\n            elif val == ')' and prev_char != '\\\\':\n                unmatched_open_brackets -= 1\n            prev_char = val\n        else:\n            # Handle the case where the group ends at the end of the string.\n            group_pattern_and_name.append((pattern[start:], group_name))\n\n    # Replace the string for named capture groups with their group names.\n    for group_pattern, group_name in group_pattern_and_name:\n        pattern = pattern.replace(group_pattern, group_name)\n    return pattern",
        "edit_status": "success"
      },
      "phase": "patch",
      "step_indices": [
        14
      ],
      "id": "13:str_replace_editor\nstr_replace"
    },
    {
      "label": "empty action",
      "execution_time": [
        0.0
      ],
      "state": {},
      "args": {},
      "phase": "general",
      "step_indices": [
        16
      ],
      "id": "14:empty action"
    },
    {
      "label": "submit",
      "execution_time": [
        0.2676899190992117,
        0.3067007861100137
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {},
      "phase": "submit",
      "step_indices": [
        17,
        19
      ],
      "id": "15:submit"
    },
    {
      "label": "rm",
      "execution_time": [
        0.119971820153296
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": [
        "/testbed/test_replace_named_groups.py"
      ],
      "phase": "general",
      "step_indices": [
        18
      ],
      "id": "16:rm"
    }
  ],
  "edges": [
    {
      "label": "1",
      "type": "exec",
      "source": "0:str_replace_editor\nview",
      "target": "1:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "0:str_replace_editor\nview",
      "target": "1:str_replace_editor\nview",
      "key": 1
    },
    {
      "label": "9",
      "type": "exec",
      "source": "0:str_replace_editor\nview",
      "target": "8:grep",
      "key": 0
    },
    {
      "type": "hier",
      "source": "0:str_replace_editor\nview",
      "target": "3:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "0:str_replace_editor\nview",
      "target": "5:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "0:str_replace_editor\nview",
      "target": "6:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "0:str_replace_editor\nview",
      "target": "7:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "2",
      "type": "exec",
      "source": "1:str_replace_editor\nview",
      "target": "2:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "1:str_replace_editor\nview",
      "target": "2:str_replace_editor\nview",
      "key": 1
    },
    {
      "label": "3",
      "type": "exec",
      "source": "2:str_replace_editor\nview",
      "target": "3:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "4",
      "type": "exec",
      "source": "3:str_replace_editor\nview",
      "target": "4:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "3:str_replace_editor\nview",
      "target": "4:str_replace_editor\nview",
      "key": 1
    },
    {
      "label": "5",
      "type": "exec",
      "source": "4:str_replace_editor\nview",
      "target": "5:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "6",
      "type": "exec",
      "source": "5:str_replace_editor\nview",
      "target": "6:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "7",
      "type": "exec",
      "source": "6:str_replace_editor\nview",
      "target": "7:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "8",
      "type": "exec",
      "source": "7:str_replace_editor\nview",
      "target": "0:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "7:str_replace_editor\nview",
      "target": "9:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "10",
      "type": "exec",
      "source": "8:grep",
      "target": "8:grep",
      "key": 0
    },
    {
      "label": "11",
      "type": "exec",
      "source": "8:grep",
      "target": "9:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "12",
      "type": "exec",
      "source": "9:str_replace_editor\nview",
      "target": "10:str_replace_editor\nstr_replace",
      "key": 0
    },
    {
      "label": "13",
      "type": "exec",
      "source": "10:str_replace_editor\nstr_replace",
      "target": "11:echo",
      "key": 0
    },
    {
      "label": "13",
      "type": "exec",
      "source": "11:echo",
      "target": "12:python",
      "key": 0
    },
    {
      "label": "14",
      "type": "exec",
      "source": "12:python",
      "target": "13:str_replace_editor\nstr_replace",
      "key": 0
    },
    {
      "label": "16",
      "type": "exec",
      "source": "12:python",
      "target": "14:empty action",
      "key": 0
    },
    {
      "label": "15",
      "type": "exec",
      "source": "13:str_replace_editor\nstr_replace",
      "target": "12:python",
      "key": 0
    },
    {
      "label": "17",
      "type": "exec",
      "source": "14:empty action",
      "target": "15:submit",
      "key": 0
    },
    {
      "label": "18",
      "type": "exec",
      "source": "15:submit",
      "target": "16:rm",
      "key": 0
    },
    {
      "label": "19",
      "type": "exec",
      "source": "16:rm",
      "target": "15:submit",
      "key": 0
    }
  ]
}