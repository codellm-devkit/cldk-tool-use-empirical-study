{
  "directed": true,
  "multigraph": true,
  "graph": {
    "resolution_status": "unresolved",
    "instance_name": "matplotlib__matplotlib-21568"
  },
  "nodes": [
    {
      "label": "str_replace_editor\ncreate",
      "execution_time": [
        0.18293427489697933
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/reproduce_bug.py",
        "file_text": "import matplotlib\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\n\nnp.random.seed(1)\nmatplotlib.rcParams[\"text.usetex\"] = True\n\ndates = pd.date_range(\"2020-01-01 00:00:00\", end=\"2020-01-01 00:10:00\", periods=100)\ndata = np.random.rand(100)\n\nfig, ax = plt.subplots(constrained_layout=True)\nax.plot(dates, data)\nplt.savefig(matplotlib.__version__ + \".png\")"
      },
      "phase": "verification",
      "step_indices": [
        0
      ],
      "id": "0:str_replace_editor\ncreate"
    },
    {
      "label": "python",
      "execution_time": [
        3.258350569056347,
        2.3829630019608885,
        1.365365867037326,
        1.1541047769133002
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": [
        "/testbed/reproduce_bug.py"
      ],
      "phase": "verification",
      "step_indices": [
        1,
        3,
        5,
        14
      ],
      "id": "1:python"
    },
    {
      "label": "str_replace_editor\nstr_replace",
      "execution_time": [
        0.19179006083868444
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/reproduce_bug.py",
        "old_str": "import matplotlib\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\n\nnp.random.seed(1)\nmatplotlib.rcParams[\"text.usetex\"] = True\n\ndates = pd.date_range(\"2020-01-01 00:00:00\", end=\"2020-01-01 00:10:00\", periods=100)\ndata = np.random.rand(100)\n\nfig, ax = plt.subplots(constrained_layout=True)\nax.plot(dates, data)\nplt.savefig(matplotlib.__version__ + \".png\")",
        "new_str": "import matplotlib\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\n\nnp.random.seed(1)\nmatplotlib.rcParams[\"text.usetex\"] = True\n\ndates = pd.date_range(\"2020-01-01 00:00:00\", end=\"2020-01-01 00:10:00\", periods=100).to_numpy()\ndata = np.random.rand(100)\n\nfig, ax = plt.subplots(constrained_layout=True)\nax.plot(dates, data)\nplt.savefig(matplotlib.__version__ + \".png\")",
        "edit_status": "success"
      },
      "phase": "patch",
      "step_indices": [
        2
      ],
      "id": "2:str_replace_editor\nstr_replace"
    },
    {
      "label": "str_replace_editor\nstr_replace",
      "execution_time": [
        0.2300640889443457
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/reproduce_bug.py",
        "old_str": "import matplotlib\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\n\nnp.random.seed(1)\nmatplotlib.rcParams[\"text.usetex\"] = True\n\ndates = pd.date_range(\"2020-01-01 00:00:00\", end=\"2020-01-01 00:10:00\", periods=100).to_numpy()\ndata = np.random.rand(100)\n\nfig, ax = plt.subplots(constrained_layout=True)\nax.plot(dates, data)\nplt.savefig(matplotlib.__version__ + \".png\")",
        "new_str": "import matplotlib\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\n\nnp.random.seed(1)\nmatplotlib.rcParams[\"text.usetex\"] = False  # Temporarily disable usetex\n\ndates = pd.date_range(\"2020-01-01 00:00:00\", end=\"2020-01-01 00:10:00\", periods=100).to_numpy()\ndata = np.random.rand(100)\n\nfig, ax = plt.subplots(constrained_layout=True)\nax.plot(dates, data)\nplt.savefig(matplotlib.__version__ + \"_notext.png\")",
        "edit_status": "success"
      },
      "phase": "patch",
      "step_indices": [
        4
      ],
      "id": "3:str_replace_editor\nstr_replace"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.22187002492137253
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/lib/matplotlib/axis.py"
      },
      "phase": "localization",
      "step_indices": [
        6
      ],
      "id": "4:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.1967187449336052
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/lib/matplotlib/axis.py",
        "view_range": [
          291,
          301
        ]
      },
      "phase": "localization",
      "step_indices": [
        7
      ],
      "id": "5:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.21986137004569173
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/lib/matplotlib/text.py"
      },
      "phase": "localization",
      "step_indices": [
        8
      ],
      "id": "6:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.19560144701972604
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/lib/matplotlib/text.py",
        "view_range": [
          671,
          739
        ]
      },
      "phase": "localization",
      "step_indices": [
        9
      ],
      "id": "7:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.2042897348292172
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/lib/matplotlib/backends/backend_agg.py"
      },
      "phase": "localization",
      "step_indices": [
        10
      ],
      "id": "8:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nview",
      "execution_time": [
        0.18366502597928047
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/lib/matplotlib/backends/backend_agg.py",
        "view_range": [
          278,
          293
        ]
      },
      "phase": "localization",
      "step_indices": [
        11
      ],
      "id": "9:str_replace_editor\nview"
    },
    {
      "label": "str_replace_editor\nstr_replace",
      "execution_time": [
        0.19594737607985735
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/lib/matplotlib/backends/backend_agg.py",
        "old_str": "def draw_tex(self, gc, x, y, s, prop, angle, *, mtext=None):\n        # docstring inherited\n        # todo, handle props, angle, origins\n        size = prop.get_size_in_points()\n\n        texmanager = self.get_texmanager()\n\n        Z = texmanager.get_grey(s, size, self.dpi)\n        Z = np.array(Z * 255.0, np.uint8)\n\n        w, h, d = self.get_text_width_height_descent(s, prop, ismath=\"TeX\")\n        xd = d * sin(radians(angle))\n        yd = d * cos(radians(angle))\n        x = round(x + xd)\n        y = round(y + yd)\n        self._renderer.draw_text_image(Z, x, y, angle, gc)",
        "new_str": "def draw_tex(self, gc, x, y, s, prop, angle, *, mtext=None):\n        # docstring inherited\n        # todo, handle props, angle, origins\n        size = prop.get_size_in_points()\n\n        texmanager = self.get_texmanager()\n\n        Z = texmanager.get_grey(s, size, self.dpi)\n        Z = np.array(Z * 255.0, np.uint8)\n\n        w, h, d = self.get_text_width_height_descent(s, prop, ismath=\"TeX\")\n        xd = d * sin(radians(angle))\n        yd = d * cos(radians(angle))\n        x = round(x + xd)\n        y = round(y + yd)\n        \n        # Ensure consistent spacing for datetime labels\n        if mtext and hasattr(mtext, '_x') and isinstance(mtext._x, (np.datetime64, pd.Timestamp)):\n            x += 2  # Adjust spacing for datetime labels\n            \n        self._renderer.draw_text_image(Z, x, y, angle, gc)",
        "edit_status": "success"
      },
      "phase": "patch",
      "step_indices": [
        12
      ],
      "id": "10:str_replace_editor\nstr_replace"
    },
    {
      "label": "str_replace_editor\nstr_replace",
      "execution_time": [
        0.1924683558754623
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {
        "path": "/testbed/reproduce_bug.py",
        "old_str": "import matplotlib\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\n\nnp.random.seed(1)\nmatplotlib.rcParams[\"text.usetex\"] = False  # Temporarily disable usetex\n\ndates = pd.date_range(\"2020-01-01 00:00:00\", end=\"2020-01-01 00:10:00\", periods=100).to_numpy()\ndata = np.random.rand(100)\n\nfig, ax = plt.subplots(constrained_layout=True)\nax.plot(dates, data)\nplt.savefig(matplotlib.__version__ + \"_notext.png\")",
        "new_str": "import matplotlib\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport pandas as pd\n\nnp.random.seed(1)\nmatplotlib.rcParams[\"text.usetex\"] = True  # Re-enable usetex\n\ndates = pd.date_range(\"2020-01-01 00:00:00\", end=\"2020-01-01 00:10:00\", periods=100).to_numpy()\ndata = np.random.rand(100)\n\nfig, ax = plt.subplots(constrained_layout=True)\nax.plot(dates, data)\nplt.savefig(matplotlib.__version__ + \"_fixed.png\")",
        "edit_status": "success"
      },
      "phase": "patch",
      "step_indices": [
        13
      ],
      "id": "11:str_replace_editor\nstr_replace"
    },
    {
      "label": "empty action",
      "execution_time": [
        0.0
      ],
      "state": {},
      "args": {},
      "phase": "general",
      "step_indices": [
        15
      ],
      "id": "12:empty action"
    },
    {
      "label": "submit",
      "execution_time": [
        0.22199285309761763,
        0.22311697783879936
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": {},
      "phase": "submit",
      "step_indices": [
        16,
        18
      ],
      "id": "13:submit"
    },
    {
      "label": "rm",
      "execution_time": [
        0.11890779808163643
      ],
      "state": {
        "working_dir": "/testbed"
      },
      "args": [
        "/testbed/reproduce_bug.py"
      ],
      "phase": "general",
      "step_indices": [
        17
      ],
      "id": "14:rm"
    }
  ],
  "edges": [
    {
      "label": "1",
      "type": "exec",
      "source": "0:str_replace_editor\ncreate",
      "target": "1:python",
      "key": 0
    },
    {
      "label": "2",
      "type": "exec",
      "source": "1:python",
      "target": "2:str_replace_editor\nstr_replace",
      "key": 0
    },
    {
      "label": "4",
      "type": "exec",
      "source": "1:python",
      "target": "3:str_replace_editor\nstr_replace",
      "key": 0
    },
    {
      "label": "6",
      "type": "exec",
      "source": "1:python",
      "target": "4:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "15",
      "type": "exec",
      "source": "1:python",
      "target": "12:empty action",
      "key": 0
    },
    {
      "label": "3",
      "type": "exec",
      "source": "2:str_replace_editor\nstr_replace",
      "target": "1:python",
      "key": 0
    },
    {
      "label": "5",
      "type": "exec",
      "source": "3:str_replace_editor\nstr_replace",
      "target": "1:python",
      "key": 0
    },
    {
      "label": "7",
      "type": "exec",
      "source": "4:str_replace_editor\nview",
      "target": "5:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "4:str_replace_editor\nview",
      "target": "5:str_replace_editor\nview",
      "key": 1
    },
    {
      "label": "8",
      "type": "exec",
      "source": "5:str_replace_editor\nview",
      "target": "6:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "9",
      "type": "exec",
      "source": "6:str_replace_editor\nview",
      "target": "7:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "6:str_replace_editor\nview",
      "target": "7:str_replace_editor\nview",
      "key": 1
    },
    {
      "label": "10",
      "type": "exec",
      "source": "7:str_replace_editor\nview",
      "target": "8:str_replace_editor\nview",
      "key": 0
    },
    {
      "label": "11",
      "type": "exec",
      "source": "8:str_replace_editor\nview",
      "target": "9:str_replace_editor\nview",
      "key": 0
    },
    {
      "type": "hier",
      "source": "8:str_replace_editor\nview",
      "target": "9:str_replace_editor\nview",
      "key": 1
    },
    {
      "label": "12",
      "type": "exec",
      "source": "9:str_replace_editor\nview",
      "target": "10:str_replace_editor\nstr_replace",
      "key": 0
    },
    {
      "label": "13",
      "type": "exec",
      "source": "10:str_replace_editor\nstr_replace",
      "target": "11:str_replace_editor\nstr_replace",
      "key": 0
    },
    {
      "label": "14",
      "type": "exec",
      "source": "11:str_replace_editor\nstr_replace",
      "target": "1:python",
      "key": 0
    },
    {
      "label": "16",
      "type": "exec",
      "source": "12:empty action",
      "target": "13:submit",
      "key": 0
    },
    {
      "label": "17",
      "type": "exec",
      "source": "13:submit",
      "target": "14:rm",
      "key": 0
    },
    {
      "label": "18",
      "type": "exec",
      "source": "14:rm",
      "target": "13:submit",
      "key": 0
    }
  ]
}